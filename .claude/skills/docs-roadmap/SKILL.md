---
name: docs-roadmap
description: 実装ロードマップ（.docs/roadmap.md）の作成・更新・再構成を行う
tools: Read, Write, Edit, Glob, Grep, AskUserQuestion, TodoWrite, Bash
user-invocable: true
---

# docs-roadmap - 実装ロードマップ管理

プロジェクトのマイルストーンを定義し、それぞれの実装タスクを分割・整理し、進捗を管理するためのドキュメントを管理する。

## パラメータの受け取り方

```
/docs-roadmap action={操作} [ユーザーからの指示・追加情報]
```

### {action}: 操作内容

| action | 操作内容 |
|--------|------|
| create | 新規作成 |
| update | 更新・編集 |
| restructure | 既存の内容にとらわれず、ゼロベースで再構成 |


## 実行フロー

### 1. 事前情報の確認

ユーザーからの要望や参考すべき文書・情報が指定されているはずなので、必ず確認します。

**前提**: `.docs/spec.md` が作成済みであること。必ず読み込んでから作業を開始してください。


### 2. ドキュメントの作成・編集

以下のフォーマットに従って `.docs/roadmap.md` を {action} します。


### 3. tasks/ との同期

`roadmap.md` の更新後、`tasks/*.md` との同期を確認してください。

| roadmap.md の状態 | tasks/ の状態・操作 |
|-------------------|---------------|
| タスクが追加された | 対応する `tasks/T-M{X}-{N}.md` を作成 |
| タスクが削除された | `tasks/T-M{X}-{N}.md` も削除 |
| 状態変更（⬜→🔄→✅） | 一致するように状態を更新 |

**確認事項**:
- ROADMAP のタスクと tasks/ のファイルが1対1対応している
- タスク ID が一致している
- 状態が一致している


### 4. 一度コミットする

ドキュメントを {action} したら、git commit します。


### 5. Codex による最終レビュー

以下を実行して、完成したドキュメントを Codex にレビューさせ、修正指示があれば参考にして修正してください。

```
/codex-review --auto-commit
```


---

## フォーマット仕様

出力先: `.docs/roadmap.md`

### マイルストーンID と タスクID

`M{マイルストーン番号}`でIDを定義します。（例: `M1`, `M2`）

各マイルストーンごとに、タスクIDを連番で定義していきます。

`T-{マイルストーンID}-{連番}` 形式（例: `T-M1-1`, `T-M1-2`, `T-M2-2`）


### タスクの状態アイコン

| 記号 | 意味 |
|------|------|
| ⬜ | 未着手 |
| 🔄 | 進行中 |
| ✅ | 完了 |


---

## テンプレート

```markdown
# 実装ロードマップ

## マイルストーン構成

| マイルストーン | 内容 |
|----------|------|
| M1 | {マイルストーン名} |
| M2 | {マイルストーン名} |
| ... | ... |


## M1: {マイルストーン名}

| タスクID |  状態 | 依存タスク | 対応要件 | 概要 |
|----|------|------|--------|--------|
| T-M1-1 | ⬜ | - | {FR-XXX} | {タスク概要} |
| T-M1-2 | ⬜ | T-M1-1 | {FR-XXX} | {タスク概要} |
| ... | ... | ... | ... | ... |


### マイルストーン達成条件
- [ ] {達成条件}
- [ ] {達成条件}


## M2: {マイルストーン名}

| タスクID |  状態 | 依存タスク | 対応要件 | 概要 |
|----|--------|------|------|--------|
| ... | ... | ... | ... | ... |


### マイルストーン達成条件
- [ ] {達成条件}
- [ ] {達成条件}
```


---

## よくある間違い

| NG | OK | 理由 |
|----|-----|------|
| タスクIDを独自採番 | 連番で順番に採番 | 同期が取れなくなる |
| 完了タスクを削除 | 完了タスクは保持（状態✅） | 履歴として重要 |
| 依存関係を省略 | 依存タスクを明記 | 実装順序が不明確になる |
| 対応要件なしで追加 | FR-XXX を紐付け | 要件との整合性が取れなくなる |
| タスクの詳細を記載 | 詳細は書かない | tasks/内の個別ファイルに記載するため |

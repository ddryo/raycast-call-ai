# Project Planning - プロジェクト計画

ユーザーの要望から、仕様書作成〜ロードマップ作成までを行い、実装準備を整えます。

## 引数

- `$ARGUMENTS`: ユーザーの要望テキスト（必須）

## 前提条件

- `/project-init` が完了していること（Git/GitHub セットアップ済み）
- または手動で Git 初期化済みであること。

## 実行手順

TodoWrite ツールで以下のフェーズを管理してください:

- [ ] Phase 0: 方向性の確認
- [ ] Phase 1: ドキュメント作成
- [ ] Phase 2: Codex レビュー

### Phase 0: プロジェクトの重要ポイントと方向性の確認

1. ユーザーの要望を元に、プロジェクトの機能要件・非機能要件を整理し、重要となるポイントを先に列挙し、方向性を確認します。

```markdown
## 重要ポイント（案）

1. [ポイント]
2. [ポイント]
...
```

情報が不足していたり、不明点があればユーザーに質問・確認し、プロジェクトの方向性をこの初期段階でしっかり見定めること。

2. Codex と相談

重要ポイントが整理できたら、一度 codex を呼び出して相談します。

以下のコマンドを使い、このプロジェクトの要件を伝えてあなたが作成した重要リストで問題がなさそうか相談してください。

```bash
codex exec --sandbox read-only '
## プロジェクト概要
{ユーザーの要望を簡潔に記載}

## 重要ポイント（案）
{整理した重要ポイントを記載}

上記の重要ポイントについて、不足している観点や考慮すべき点があれば教えてください。
'
```

> **Note**: `codex exec` の引数にはシングルクォートで囲んだプロンプトを渡します。複数行の場合もそのまま記述できます。


3. Codex の返答を踏まえて、改めて考える。

返答を鵜呑みにする必要はありませんが、参考すべき情報があれば改めて考えます。

4. ユーザーに最終確認

重要ポイントが整理できたら、一度ユーザーに見せて確認します。

ユーザーの確認が取れたら、次のフェーズへ進んでください。


### Phase 1: ドキュメント作成

Task ツールで サブエージェント `document-editor` を呼び出し、以下のプロンプトを実行させてください。

**Phase 0 の文脈を明示的に渡し、spec → roadmap → task を一括で作成します。**

```
## プロジェクトドキュメントの作成

### ユーザーの要望
{ユーザーの要望を伝える}

### 重要ポイント
{Phase 0 で確認した重要ポイントを伝える}

### 背景・補足
{Phase 0 での議論で得られた追加の文脈があれば記載}

---

以下を順に実行してください:

1. /docs-spec action=create
2. /docs-roadmap action=create
3. /docs-task action=create
```

サブエージェントの作業完了後、以下が生成されていることを確認:
- `.docs/spec.md`
- `.docs/roadmap.md`
- `.docs/tasks/*.md`


### Phase 2: Codex レビュー

全ドキュメントの作成が完了したら、レビューを実行:

```
/codex-review
```

レビューで指摘があれば修正し、`ok: true` になるまで反復する。


## 成果報告

以下のフォーマットで、各フェーズが完了したことを報告して終了します。

```
## 生成されたドキュメント
- `.docs/spec.md` - プロジェクト仕様書
- `.docs/roadmap.md` - ロードマップ
- `.docs/tasks/` - タスクの詳細

## 次のステップ

実装を開始するには:
/project-autopilot
```

## エラー時の対応

各フェーズでエラーが発生した場合:

1. エラー内容をユーザーに報告
2. 解決方法があれば提案
3. 続行/中止を確認

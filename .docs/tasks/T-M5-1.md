# T-M5-1: 型定義の拡張とカスタムコマンド永続化層の実装

| 項目 | 内容 |
|------|------|
| マイルストーン | M5 |
| 依存 | - |
| 要件ID | FR-013, FR-017 |

## 説明
M5 の基盤となる型定義の拡張とカスタムコマンドの永続化層を実装する。既存の Thread 型に `customCommandId` を追加し、新たに `CustomCommand` 型と CRUD 関数を作成する。

## 作業内容
1. `src/types/index.ts` に `CustomCommand` 型を追加:
   - `id: string` - コマンド固有ID（UUID v4）
   - `name: string` - コマンド名
   - `systemPrompt: string` - システムプロンプト
   - `model?: string` - 使用モデル（任意）
   - `icon?: string` - Raycast Icon 名（任意）
2. `src/types/index.ts` の `Thread` 型に `customCommandId?: string` を追加:
   - 既存の Thread データ（customCommandId なし）は undefined として問題なく動作する
3. `src/types/index.ts` の `Preferences` 型に `systemPrompt?: string` を追加（Preferences で未設定時は undefined）
4. `src/storage/custom-commands.ts` を新規作成:
   - LocalStorage キー: `ask-ai:custom-commands`
   - `saveCustomCommands(commands: CustomCommand[]): Promise<void>` - 全件保存
   - `loadCustomCommands(): Promise<CustomCommand[]>` - 全件読み込み
   - `addCustomCommand(command: CustomCommand): Promise<void>` - 追加
   - `updateCustomCommand(command: CustomCommand): Promise<void>` - 更新
   - `deleteCustomCommand(id: string): Promise<void>` - 削除
   - `getCustomCommand(id: string): Promise<CustomCommand | undefined>` - ID で取得

## タスクのチェックリスト
- [ ] `CustomCommand` 型が正しく定義されている
- [ ] `Thread` 型に `customCommandId?` が追加されている
- [ ] `Preferences` 型に `systemPrompt` が追加されている
- [ ] カスタムコマンドの CRUD 関数が正しく動作する
- [ ] 既存の Thread データとの後方互換性が保たれている
- [ ] `npm run build` でエラーなくビルドが通る

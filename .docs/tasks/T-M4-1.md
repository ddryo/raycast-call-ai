# T-M4-1: スレッド作成・切替機能の実装

| 項目 | 内容 |
|------|------|
| マイルストーン | M4 |
| 依存 | T-M3-3 |
| 要件ID | FR-010 |

## 説明
複数の会話スレッドを作成し、スレッド間を切り替える機能を実装する。useConversation フックを拡張し、スレッド管理の状態とロジックを追加する。

## 作業内容
1. Thread 管理用の state を useConversation に追加:
   - `threads: Thread[]` - スレッド一覧
   - `currentThreadId: string` - 現在のスレッドID
2. スレッド作成関数を実装:
   - 新しい Thread を生成（UUID v4）
   - threads に追加し、currentThreadId を切り替え
   - messages を空にリセット
   - LocalStorage に threads 一覧を保存
3. スレッド切替関数を実装:
   - currentThreadId を変更
   - loadMessages() で該当スレッドの会話を復元
   - LocalStorage に current-thread を保存
4. ActionPanel に「新しい会話」アクションを追加
5. スレッドタイトルの自動生成:
   - 最初のユーザーメッセージの先頭部分をタイトルに設定

## タスクのチェックリスト
- [ ] 新しいスレッドを作成できる
- [ ] スレッド間を切り替えると、対応する会話が表示される
- [ ] スレッド一覧が LocalStorage に永続化される
- [ ] スレッドタイトルが自動生成される
- [ ] 拡張機能再起動後もスレッド構成が維持される
